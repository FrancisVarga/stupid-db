{"id":"stupid-db-0bs","title":"tool-runtime: Define Tool trait with JSON Schema support","description":"Define the Tool trait — primary extension point. definition() + execute(). GH #165. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:22Z","dependencies":[{"issue_id":"stupid-db-0bs","depends_on_id":"stupid-db-8nd","type":"blocks","created_at":"2026-02-17T19:25:48Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-183","title":"mcp: Implement MCP server (expose tools to external clients)","description":"McpServer wrapping ToolRegistry. Handles initialize, tools/list, tools/call via stdio. GH #173. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:28Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:28Z","dependencies":[{"issue_id":"stupid-db-183","depends_on_id":"stupid-db-8cm","type":"blocks","created_at":"2026-02-17T19:25:53Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-183","depends_on_id":"stupid-db-fm5","type":"blocks","created_at":"2026-02-17T19:25:53Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-1ca","title":"Create SQL migration framework with sqlx migrate","description":"Set up sqlx migration infrastructure:\n1. Create migrations/ directory at workspace root (or crates/server/migrations/)\n2. Create 001_create_pgvector.sql migration:\n   - CREATE EXTENSION IF NOT EXISTS vector\n   - CREATE TABLE documents (id UUID PK, filename TEXT, file_type TEXT, file_size BIGINT, uploaded_at TIMESTAMPTZ)\n   - CREATE TABLE chunks (id UUID PK, document_id UUID FK, chunk_index INT, content TEXT, page_number INT, section_heading TEXT, embedding vector(1536), created_at TIMESTAMPTZ)\n   - CREATE INDEX ON chunks USING hnsw (embedding vector_cosine_ops)\n3. Add sqlx::migrate!() call to server startup (run pending migrations before serving)\n4. Embedding dimension should be configurable — consider using vector without fixed dimension or making it a config param","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:19Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:20:01Z","closed_at":"2026-02-17T22:20:01Z","close_reason":"migrations/001_create_pgvector.sql created with documents+chunks tables, HNSW index. db.rs init_pg_pool() helper added.","dependencies":[{"issue_id":"stupid-db-1ca","depends_on_id":"stupid-db-jop","type":"blocks","created_at":"2026-02-17T22:12:18Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-1fb","title":"kg-pg-mcp: Knowledge Graph PostgreSQL MCP Server","description":"Build a self-contained FastMCP server in packages/kg-pg-mcp that provides knowledge embedding and retrieval over PostgreSQL with pgvector. Features: embed text/URLs/files, smart chunking (heading-aware, token-based, overlap), configurable OpenAI embedding models (single model per DB), namespace isolation, category + metadata JSONB filtering on search, Alembic migrations. 7 MCP tools: embed_text, embed_url, embed_file, search, list_documents, delete_document, list_namespaces. Supports all content types (text, markdown, PDF, code, HTML). Independent schema, serves Claude Code + Dashboard + standalone.","status":"open","priority":1,"issue_type":"feature","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:53:36Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:53:36Z"}
{"id":"stupid-db-1hx","title":"kg-pg-mcp: URL fetcher and file reader","description":"Create fetcher.py: async URL fetching with httpx. Features: follow redirects, respect content-type, timeout config, user-agent header, return FetchResult(content, content_type, url, title). Create file_reader.py: local file reading with path validation. Features: configurable allowed_directories for security, auto-detect content type from extension, read binary (PDF) and text files, return FileResult(content, file_path, content_type, file_size). Both modules feed into the parser pipeline.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:54:01Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:54:01Z","dependencies":[{"issue_id":"stupid-db-1hx","depends_on_id":"stupid-db-y92","type":"blocks","created_at":"2026-02-18T01:54:17Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-1i7","title":"Implement upload API endpoint (POST /embeddings/upload)","description":"Create Axum multipart upload endpoint in crates/server/src/api/embedding.rs:\n\nPOST /embeddings/upload\n- Accept: multipart/form-data with file field\n- Validate file type (pdf, txt, md) by extension and content-type\n- Extract text using ingest document extraction module\n- Smart-chunk the extracted text\n- Embed all chunks using existing Embedder (from AppState or constructed from config)\n- Insert document + chunks into pgvector via storage layer\n- Return JSON: { document_id, filename, chunk_count, file_size }\n\nError handling:\n- 400 for unsupported file types\n- 413 for files \u003e 50MB\n- 500 for embedding or DB failures with descriptive error\n\nWire up route in main.rs Router.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:46Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:26:33Z","closed_at":"2026-02-17T22:26:33Z","close_reason":"Upload API: multipart → extract → chunk → embed → pgvector. 50MB limit, returns doc_id + chunk_count.","dependencies":[{"issue_id":"stupid-db-1i7","depends_on_id":"stupid-db-nty","type":"blocks","created_at":"2026-02-17T22:12:19Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-1i7","depends_on_id":"stupid-db-s4o","type":"blocks","created_at":"2026-02-17T22:12:19Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-1i7","depends_on_id":"stupid-db-yvk","type":"blocks","created_at":"2026-02-17T22:12:20Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-1kd","title":"cli: Create crate scaffolding and binary entry point","description":"Create crates/cli/ binary. Clap args, config loading, provider init. Binary name: stupid-cli. GH #175. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:36Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:36Z","dependencies":[{"issue_id":"stupid-db-1kd","depends_on_id":"stupid-db-5z0","type":"blocks","created_at":"2026-02-17T19:25:55Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-1kd","depends_on_id":"stupid-db-d6j","type":"blocks","created_at":"2026-02-17T19:25:55Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-1y1","title":"cli: Implement internal tools — bash_execute, file_read, file_write","description":"System tools with RequireConfirmation permission. Timeout, path traversal protection. GH #178. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:37Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:37Z","dependencies":[{"issue_id":"stupid-db-1y1","depends_on_id":"stupid-db-0bs","type":"blocks","created_at":"2026-02-17T19:25:56Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-1y1","depends_on_id":"stupid-db-ae4","type":"blocks","created_at":"2026-02-17T19:25:57Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-228","title":"kg-pg-mcp: Integration testing and .mcp.json config","description":"Write integration tests for the full pipeline: embed text -\u003e search, embed URL -\u003e search, embed file -\u003e search, namespace isolation, category filtering, metadata filtering, document deletion. Test chunking with various content types. Add .mcp.json configuration example for Claude Code stdio transport. Test that MCP server starts and responds to tool calls. Verify Alembic migrations run cleanly on fresh database.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:54:09Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:54:09Z","dependencies":[{"issue_id":"stupid-db-228","depends_on_id":"stupid-db-dli","type":"blocks","created_at":"2026-02-18T01:54:18Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-30l","title":"tool-runtime: Conversation state and history management","description":"Conversation struct, message history, context window truncation, token counting. GH #170. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:27Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:27Z","dependencies":[{"issue_id":"stupid-db-30l","depends_on_id":"stupid-db-8nd","type":"blocks","created_at":"2026-02-17T19:25:50Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-47f","title":"Batch execution: Claude Code crates (20 issues, 7 waves)","description":"Tracking issue for wave-based execution of brainstorm-claude-code-crates label. 20 subtasks across 7 waves.","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:57:11Z","created_by":"FrancisVarga","updated_at":"2026-02-17T20:09:20Z","closed_at":"2026-02-17T20:09:20Z","close_reason":"Completed: 3 new crates (tool-runtime, mcp, cli) + claude provider. 93 tests passing. Issues #163-#179 implemented."}
{"id":"stupid-db-59o","title":"kg-pg-mcp: SQLAlchemy models and Alembic migrations","description":"Create SQLAlchemy async ORM models in models.py and db.py. Tables: kb_documents (id UUID PK, namespace TEXT, title TEXT, source_type ENUM(text/url/file), source_ref TEXT, category TEXT, metadata JSONB, token_count INT, created_at TIMESTAMPTZ) and kb_chunks (id UUID PK, document_id UUID FK CASCADE, namespace TEXT, chunk_index INT, content TEXT, embedding vector(N), created_at TIMESTAMPTZ). Set up Alembic with alembic.ini and alembic/env.py configured for async SQLAlchemy. Create initial migration 001_initial_schema.py. Add HNSW index on kb_chunks.embedding, composite index on (namespace), and index on kb_documents(namespace, category).","status":"open","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:53:47Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:53:47Z","dependencies":[{"issue_id":"stupid-db-59o","depends_on_id":"stupid-db-y92","type":"blocks","created_at":"2026-02-18T01:54:16Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-5jq","title":"tool-runtime: Create crate scaffolding and Cargo.toml","description":"Create crates/tool-runtime/ with workspace config. GH #163. Part of epic stupid-db-mm1.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T20:09:20Z","closed_at":"2026-02-17T20:09:20Z","close_reason":"Completed as part of batch execution"}
{"id":"stupid-db-5yd","title":"Create /api/ai-sdk/chat API route with Anthropic streaming","description":"Create dashboard/app/api/ai-sdk/chat/route.ts that: (1) imports @ai-sdk/anthropic and streamText from ai, (2) accepts UIMessage[] from useChat, (3) calls streamText with anthropic provider using claude-sonnet-4-5, (4) returns toUIMessageStreamResponse with sendReasoning:true and messageMetadata for token usage, (5) supports model selection via request body field, (6) includes system prompt with stupid-db context. Use ANTHROPIC_API_KEY env var.","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:19:54Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:21:44Z","closed_at":"2026-02-17T22:21:44Z","close_reason":"Created /api/ai-sdk/chat route with @ai-sdk/anthropic, streamText, model selection, sendReasoning, and token metadata.","dependencies":[{"issue_id":"stupid-db-5yd","depends_on_id":"stupid-db-t7b","type":"blocks","created_at":"2026-02-17T22:20:11Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-5yd","depends_on_id":"stupid-db-wrd","type":"blocks","created_at":"2026-02-17T22:20:11Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-5z0","title":"tool-runtime: Define ToolAwareLlmProvider trait with streaming","description":"New trait in tool-runtime for tool_use + streaming. Stream\u003cItem=StreamEvent\u003e. GH #167. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:22Z","dependencies":[{"issue_id":"stupid-db-5z0","depends_on_id":"stupid-db-8nd","type":"blocks","created_at":"2026-02-17T19:25:49Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-62j","title":"mcp: Implement MCP client (consume external MCP tools)","description":"McpClient connecting to external MCP servers. McpTool adapter implementing Tool trait. GH #174. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:28Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:28Z","dependencies":[{"issue_id":"stupid-db-62j","depends_on_id":"stupid-db-0bs","type":"blocks","created_at":"2026-02-17T19:25:54Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-62j","depends_on_id":"stupid-db-fm5","type":"blocks","created_at":"2026-02-17T19:25:53Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-709","title":"Implement text extraction module for PDF/TXT/MD","description":"Create crates/ingest/src/document/ module with text extraction:\n1. mod.rs — public interface: extract_text(bytes, file_type) -\u003e Result\u003cExtractedDocument\u003e\n2. pdf.rs — PDF text extraction using pdf-extract crate. Extract text per page, preserve page boundaries.\n3. txt.rs — Plain text passthrough with encoding detection\n4. md.rs — Markdown text extraction (strip HTML if embedded, preserve heading structure)\n\nExtractedDocument struct:\n- pages: Vec\u003cPageContent\u003e where PageContent has page_number, text, headings\n- For TXT/MD: single 'page' with the full content\n- For PDF: one PageContent per PDF page\n\nAdd pdf-extract to crates/ingest/Cargo.toml dependencies.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:27Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:17:40Z","closed_at":"2026-02-17T22:17:40Z","close_reason":"document/ module created with PDF/TXT/MD extraction. 8 new tests, all 17 ingest tests pass."}
{"id":"stupid-db-70u","title":"kg-pg-mcp: Smart chunking pipeline (chunker.py)","description":"Create chunker.py with token-based smart chunking. Features: heading-aware splitting (detect markdown ##, HTML headers), token-based sizing using tiktoken (configurable chunk_size default 512 tokens, chunk_overlap default 50 tokens), preserve paragraph boundaries, handle code blocks as atomic units, return list of ChunkResult(content, chunk_index, section_heading, token_count). Support configurable strategies: 'paragraph' (split on double newlines), 'heading' (split on headings), 'token' (fixed token windows with overlap), 'auto' (detect best strategy from content).","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:53:55Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:53:55Z","dependencies":[{"issue_id":"stupid-db-70u","depends_on_id":"stupid-db-y92","type":"blocks","created_at":"2026-02-18T01:54:16Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-886","title":"Add model selector component for AI SDK chat","description":"Create a ModelSelector component within the /ai-sdk page that allows switching between Anthropic models: claude-sonnet-4-5 (default), claude-opus-4-5, claude-haiku-4-5. Pass selected model via sendMessage body field. Style as a dropdown matching dashboard dark theme.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:20:01Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:23:54Z","closed_at":"2026-02-17T22:23:54Z","close_reason":"ModelSelector component built inline in /ai-sdk page with Sonnet/Opus/Haiku options.","dependencies":[{"issue_id":"stupid-db-886","depends_on_id":"stupid-db-zxu","type":"blocks","created_at":"2026-02-17T22:20:12Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-8cm","title":"tool-runtime: Build ToolRegistry for dynamic tool registration","description":"ToolRegistry: register, lookup, list tools, generate schemas. Thread-safe via Arc. GH #166. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:22Z","dependencies":[{"issue_id":"stupid-db-8cm","depends_on_id":"stupid-db-0bs","type":"blocks","created_at":"2026-02-17T19:25:49Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-8nd","title":"tool-runtime: Define core types (ToolDefinition, ToolCall, ToolResult, StreamEvent)","description":"Define foundational types for tool-use system mapping to Claude tool_use API. GH #164. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:22Z","dependencies":[{"issue_id":"stupid-db-8nd","depends_on_id":"stupid-db-5jq","type":"blocks","created_at":"2026-02-17T19:25:48Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-9ie","title":"kg-pg-mcp: OpenAI embedding client (embedder.py)","description":"Create embedder.py with async OpenAI embedding client. Features: configurable model (text-embedding-3-small, text-embedding-3-large), batch embedding (send multiple texts in one API call, respecting rate limits), token counting with tiktoken before sending (report total tokens), auto-detect dimensions from model name. Interface: async def embed_texts(texts: list[str]) -\u003e list[list[float]], async def embed_query(text: str) -\u003e list[float]. Use openai AsyncOpenAI client.","status":"open","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:53:51Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:53:51Z","dependencies":[{"issue_id":"stupid-db-9ie","depends_on_id":"stupid-db-y92","type":"blocks","created_at":"2026-02-18T01:54:16Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-9qw","title":"Add PgPool to AppState and connect on server startup","description":"Extend crates/server/src/state.rs AppState with a PgPool field. On server startup in main.rs:\n1. Read PG_URL from environment (already in .env)\n2. Create sqlx::PgPool connection pool\n3. Run pending migrations via sqlx::migrate!().run(\u0026pool)\n4. Store pool in AppState for use by API handlers\n5. Handle graceful error if PG_URL not set (log warning, disable embedding features)","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:21:25Z","closed_at":"2026-02-17T22:21:25Z","close_reason":"PgPool added to AppState, init_pg_pool() wired into serve() startup. Pool is Optional — server starts gracefully without Postgres.","dependencies":[{"issue_id":"stupid-db-9qw","depends_on_id":"stupid-db-1ca","type":"blocks","created_at":"2026-02-17T22:12:18Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-ae4","title":"tool-runtime: Implement permission model for tool execution","description":"PermissionLevel enum (AutoApprove/RequireConfirmation/Deny), PermissionPolicy, PermissionChecker trait. GH #168. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:22Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:22Z","dependencies":[{"issue_id":"stupid-db-ae4","depends_on_id":"stupid-db-0bs","type":"blocks","created_at":"2026-02-17T19:25:49Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-afk","title":"Batch: Implement #193 OpenAPI docs with Scalar (12 subtasks, 4 waves)","description":"Wave execution of all subtasks #194-#205 for OpenAPI documentation with utoipa + Scalar UI. Tracking issue for batch execution.","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T23:00:46Z","created_by":"FrancisVarga","updated_at":"2026-02-17T23:13:32Z","closed_at":"2026-02-17T23:13:32Z","close_reason":"All 12 subtasks complete: utoipa deps added, 77 handlers annotated, Scalar UI mounted at /docs, pushed as 37ca266"}
{"id":"stupid-db-b2t","title":"Write tests for chunking, vector storage, and search API","description":"Tests needed:\n\n1. Unit tests for smart chunker (crates/ingest/):\n   - Markdown: splits at headings, preserves section_heading\n   - Text: splits at paragraphs, respects min/max chunk size\n   - Overlap: verifies overlap tokens between adjacent chunks\n   - Edge cases: empty doc, single paragraph, very long line\n\n2. Integration tests for pgvector storage:\n   - Insert document + chunks, verify retrieval\n   - Search returns correct ordering by similarity\n   - Delete cascades to chunks\n   - Requires running Postgres with pgvector (skip if PG_URL not set)\n\n3. API integration tests:\n   - Upload a TXT file, verify document created\n   - Search returns relevant chunks\n   - Delete removes document\n\nUse cargo nextest run. Tests requiring Postgres should be gated behind #[cfg(feature = 'integration')] or check PG_URL env var.","status":"closed","priority":3,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:12:11Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:33:52Z","closed_at":"2026-02-17T22:33:52Z","close_reason":"73 tests pass (38 ingest + 35 server), all green","dependencies":[{"issue_id":"stupid-db-b2t","depends_on_id":"stupid-db-ia0","type":"blocks","created_at":"2026-02-17T22:12:21Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-b2t","depends_on_id":"stupid-db-nty","type":"blocks","created_at":"2026-02-17T22:12:21Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-b2t","depends_on_id":"stupid-db-s4o","type":"blocks","created_at":"2026-02-17T22:12:21Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-cc8","title":"cli: Implement internal tools — graph_query, rule_list, rule_evaluate","description":"Tool impls wrapping stupid-db graph/rules crates. JSON Schema inputs, structured results. GH #177. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:37Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:37Z","dependencies":[{"issue_id":"stupid-db-cc8","depends_on_id":"stupid-db-0bs","type":"blocks","created_at":"2026-02-17T19:25:56Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-cc8","depends_on_id":"stupid-db-8cm","type":"blocks","created_at":"2026-02-17T19:25:56Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-csh","title":"Create full catalog API with CRUD + query endpoints","description":"Expose all CatalogStore operations and QueryExecutor as HTTP endpoints via axum sub-router.\n\n## What needs to happen\nCreate a self-contained catalog_router() (Pattern B from anomaly_rules/rules) that exposes:\n\n### Catalog metadata\n- GET /api/catalog — current merged catalog (exists, move here)\n- GET /api/catalog/manifest — current manifest with segment hash\n- POST /api/catalog/rebuild — trigger rebuild from all partials\n\n### Segment partials\n- GET /api/catalog/segments — list all segment IDs\n- GET /api/catalog/segments/:id — get partial catalog for segment\n- DELETE /api/catalog/segments/:id — remove segment + rebuild\n\n### External sources\n- GET /api/catalog/externals — list all external sources\n- GET /api/catalog/externals/:kind/:connection_id — get specific external source\n- POST /api/catalog/externals — add/update external source\n- DELETE /api/catalog/externals/:kind/:connection_id — remove external source\n\n### Snapshots\n- POST /api/catalog/snapshots — create snapshot of current catalog\n\n### Query execution\n- POST /api/catalog/query — execute QueryPlan against graph, return results\n\n## Technical approach\n- Create crates/server/src/catalog_api.rs with catalog_router() -\u003e Router\u003cArc\u003cAppState\u003e\u003e\n- Follow anomaly_rules_router() pattern (self-contained sub-router)\n- Add utoipa annotations for OpenAPI docs\n- Register in api/doc.rs ApiDoc\n- Move existing catalog endpoint from health.rs into the new router\n- Add proper error types consistent with QueryErrorResponse pattern","status":"closed","priority":1,"issue_type":"feature","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:23:44Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:28:32Z","closed_at":"2026-02-18T01:28:32Z","close_reason":"Implemented full catalog API with 12 endpoints as self-contained sub-router"}
{"id":"stupid-db-cwm","title":"cli: Streaming terminal output with crossterm (minimal mode)","description":"Minimal-mode TUI: streaming tokens, colored output, spinner, permission prompts, Ctrl+C. GH #176. Part of epic stupid-db-mm1.","status":"open","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:36Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:36Z","dependencies":[{"issue_id":"stupid-db-cwm","depends_on_id":"stupid-db-1kd","type":"blocks","created_at":"2026-02-17T19:25:56Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-cwm","depends_on_id":"stupid-db-s32","type":"blocks","created_at":"2026-02-17T19:25:56Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-d6j","title":"llm: Implement ToolAwareLlmProvider for Claude (Anthropic API)","description":"ClaudeToolProvider with native tool_use + SSE streaming. Translate types to/from Claude format. GH #171. Part of epic stupid-db-mm1.","status":"open","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:27Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:27Z","dependencies":[{"issue_id":"stupid-db-d6j","depends_on_id":"stupid-db-5z0","type":"blocks","created_at":"2026-02-17T19:25:52Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-d7r","title":"cli: Ratatui dashboard mode (future TUI)","description":"Optional ratatui split-pane mode with syntax highlighting, scrolling, session switcher. Future enhancement. GH #182. Part of epic stupid-db-mm1.","status":"open","priority":4,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:37Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:37Z","dependencies":[{"issue_id":"stupid-db-d7r","depends_on_id":"stupid-db-cwm","type":"blocks","created_at":"2026-02-17T19:25:58Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-dli","title":"kg-pg-mcp: FastMCP server with 7 MCP tools","description":"Create server.py with FastMCP server and all 7 tools. Use lifespan for async PG pool + OpenAI client. Tools: 1) embed_text(text, namespace?, category?, metadata?) - chunk and embed text. 2) embed_url(url, namespace?, category?, metadata?, content?) - fetch or use provided content, parse, chunk, embed. 3) embed_file(file_path, namespace?, category?, metadata?, content?) - read or use provided content, parse, chunk, embed. 4) search(query, namespace?, limit?, category?, metadata_filter?) - embed query, vector search with filters. 5) list_documents(namespace?, category?, source_type?) - browse stored docs. 6) delete_document(document_id) - remove doc + chunks. 7) list_namespaces() - show all namespaces with doc counts. Use Context for progress reporting. Support stdio and SSE transports.","status":"open","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:54:06Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:54:06Z","dependencies":[{"issue_id":"stupid-db-dli","depends_on_id":"stupid-db-1hx","type":"blocks","created_at":"2026-02-18T01:54:18Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-dli","depends_on_id":"stupid-db-59o","type":"blocks","created_at":"2026-02-18T01:54:17Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-dli","depends_on_id":"stupid-db-70u","type":"blocks","created_at":"2026-02-18T01:54:17Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-dli","depends_on_id":"stupid-db-9ie","type":"blocks","created_at":"2026-02-18T01:54:17Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-dli","depends_on_id":"stupid-db-i5h","type":"blocks","created_at":"2026-02-18T01:54:18Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-fm5","title":"mcp: Create crate scaffolding and MCP protocol types","description":"Create crates/mcp/ with JSON-RPC message types, MCP request/response types, transport abstraction. GH #172. Part of epic stupid-db-mm1.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:28Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:28Z","dependencies":[{"issue_id":"stupid-db-fm5","depends_on_id":"stupid-db-8nd","type":"blocks","created_at":"2026-02-17T19:25:53Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-goo","title":"Build dashboard /embeddings page — search panel","description":"Add search panel to dashboard/app/embeddings/page.tsx (same page as upload):\n\nSearch panel:\n- Text input for natural language query\n- Search button + Enter key support\n- POST to /embeddings/search with query\n- Results list showing:\n  - Similarity score (as percentage or 0-1)\n  - Source filename (clickable? or badge)\n  - Page number / section heading if available\n  - Chunk text preview (first ~200 chars, expandable)\n- Empty state: 'No documents uploaded yet. Upload files above to start searching.'\n- Loading state during search\n\nLayout: Upload panel on top, search panel below (or side-by-side on wide screens).\nUse D3.js only if visualizing similarity distributions — otherwise plain Tailwind components.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:59Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:31:00Z","closed_at":"2026-02-17T22:31:00Z","close_reason":"Search panel: text input + Enter key, color-coded similarity badges, expandable chunk content, source attribution (filename/page/section). Nav link added.","dependencies":[{"issue_id":"stupid-db-goo","depends_on_id":"stupid-db-ia0","type":"blocks","created_at":"2026-02-17T22:12:20Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-i5h","title":"kg-pg-mcp: Content parsers (text, HTML, PDF, code)","description":"Create parsers/ module with format-specific parsers. parsers/text.py: plain text and markdown passthrough with heading extraction. parsers/html.py: HTML to markdown using markdownify, strip scripts/styles, extract title. parsers/pdf.py: PDF to text using pymupdf (fitz), extract page numbers and section headings. parsers/code.py: source code with language detection, preserve function/class boundaries as chunk hints. Each parser returns ParseResult(text, title, metadata, format_hints). Auto-detect format from file extension or content-type header.","status":"open","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:53:59Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:53:59Z","dependencies":[{"issue_id":"stupid-db-i5h","depends_on_id":"stupid-db-y92","type":"blocks","created_at":"2026-02-18T01:54:17Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-ia0","title":"Implement search API endpoint (POST /embeddings/search)","description":"Create Axum search endpoint in crates/server/src/api/embedding.rs:\n\nPOST /embeddings/search\n- Body: { query: string, limit?: number (default 10) }\n- Embed the query text using Embedder\n- Search pgvector using cosine similarity (1 - cosine distance)\n- Return JSON: { results: [{ chunk_id, document_id, filename, content, page_number, section_heading, similarity }] }\n\nAlso add:\n- GET /embeddings/documents — list all uploaded documents with chunk counts\n- DELETE /embeddings/documents/:id — delete document and all its chunks (CASCADE)\n\nWire up routes in main.rs Router.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:50Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:26:39Z","closed_at":"2026-02-17T22:26:39Z","close_reason":"Search API: query → embed → cosine similarity via pgvector. Also list and delete endpoints. Zero compiler warnings.","dependencies":[{"issue_id":"stupid-db-ia0","depends_on_id":"stupid-db-nty","type":"blocks","created_at":"2026-02-17T22:12:20Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-ia0","depends_on_id":"stupid-db-yvk","type":"blocks","created_at":"2026-02-17T22:12:20Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-jop","title":"Add sqlx + pgvector dependencies to workspace Cargo.toml","description":"Add sqlx (with postgres, runtime-tokio, tls-rustls features) and pgvector crate to workspace dependencies. Add sqlx-cli as a dev dependency or document it as a required tool. Update crates/server/Cargo.toml and potentially crates/storage/Cargo.toml to depend on sqlx. Verify PG_URL is read from .env via stupid_core::config.","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:14Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:16:38Z","closed_at":"2026-02-17T22:16:38Z","close_reason":"sqlx 0.8.6 + pgvector 0.4.1 added to workspace and server. PostgresConfig.database_url() prefers PG_URL env var."}
{"id":"stupid-db-klq","title":"cli: Plugin system for dynamic tool loading","description":"Plugin dir with executable scripts, plugin.json manifest, ScriptTool adapter, auto-discovery. GH #181. Part of epic stupid-db-mm1.","status":"open","priority":3,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:37Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:37Z","dependencies":[{"issue_id":"stupid-db-klq","depends_on_id":"stupid-db-0bs","type":"blocks","created_at":"2026-02-17T19:25:57Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-klq","depends_on_id":"stupid-db-8cm","type":"blocks","created_at":"2026-02-17T19:25:57Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-klq","depends_on_id":"stupid-db-ae4","type":"blocks","created_at":"2026-02-17T19:25:58Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-mm1","title":"Claude Code Agent System: Implementation Epic","description":"Track implementation of Claude Code-like agentic system as 3 new Rust crates (tool-runtime, mcp, cli). See GitHub #162 for full epic with 20 sub-issues.","status":"open","priority":1,"issue_type":"feature","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:24:34Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:24:34Z"}
{"id":"stupid-db-nty","title":"Implement pgvector storage layer (insert + search)","description":"Create vector storage abstraction that wraps sqlx + pgvector operations:\n\nLocation: crates/server/src/vector_store.rs (or crates/storage/src/vector.rs)\n\nFunctions:\n1. insert_document(pool, filename, file_type, file_size) -\u003e UUID\n2. insert_chunks(pool, document_id, chunks: Vec\u003c(text, embedding, page_num, section)\u003e) -\u003e Vec\u003cUUID\u003e\n3. search(pool, query_embedding: Vec\u003cf32\u003e, limit: usize) -\u003e Vec\u003cSearchResult\u003e\n   - Uses: SELECT *, 1 - (embedding \u003c=\u003e ) AS similarity FROM chunks ORDER BY embedding \u003c=\u003e  LIMIT \n4. list_documents(pool) -\u003e Vec\u003cDocumentSummary\u003e\n5. delete_document(pool, document_id) -\u003e Result\u003c()\u003e (CASCADE deletes chunks)\n6. get_document_chunks(pool, document_id) -\u003e Vec\u003cChunkSummary\u003e\n\nSearchResult: { chunk_id, document_id, filename, content, page_number, section_heading, similarity_score }\n\nUse pgvector crate for Vector type serialization with sqlx.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:40Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:23:09Z","closed_at":"2026-02-17T22:23:09Z","close_reason":"vector_store.rs created with 5 pgvector operations: insert_document, insert_chunks, search (cosine similarity), list_documents, delete_document. Runtime queries for build independence.","dependencies":[{"issue_id":"stupid-db-nty","depends_on_id":"stupid-db-9qw","type":"blocks","created_at":"2026-02-17T22:12:19Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-or0","title":"Fix Athena DESCRIBE parsing: column name contains tab-delimited type+comment","description":"Athena DESCRIBE returns single-column tab-delimited rows but parser assumes 3 separate columns. Column names contain 'name\\ttype\\tcomment' while data_type is empty.","status":"closed","priority":1,"issue_type":"bug","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:31:55Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:32:29Z","closed_at":"2026-02-18T01:32:29Z","close_reason":"Fixed tab-delimited DESCRIBE parsing in athena_query.rs"}
{"id":"stupid-db-p8n","title":"Build dashboard /embeddings page — upload panel","description":"Create dashboard/app/embeddings/page.tsx with an upload panel:\n\nUpload panel:\n- Drag-and-drop zone for files (PDF, TXT, MD)\n- Click-to-browse file picker as fallback\n- File type validation on client side\n- Upload progress indicator\n- POST to /embeddings/upload as multipart/form-data\n- Show success message with chunk count after upload\n- List of uploaded documents below with filename, type, size, date, chunk count\n- Delete button per document (calls DELETE /embeddings/documents/:id)\n\nStyling: Tailwind, consistent with existing dashboard pages.\nFollow existing page patterns (check layout.tsx for nav integration).\nAdd 'Embeddings' link to the sidebar/nav.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:54Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:31:00Z","closed_at":"2026-02-17T22:31:00Z","close_reason":"Upload panel: drag-and-drop + click-to-browse, file validation, progress spinner, success with chunk count. refreshKey pattern for document list.","dependencies":[{"issue_id":"stupid-db-p8n","depends_on_id":"stupid-db-1i7","type":"blocks","created_at":"2026-02-17T22:12:20Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-pnf","title":"cli: Session persistence (save/load conversations)","description":"Save/load conversation history to JSON. Auto-save, --session flag, --list-sessions. GH #179. Part of epic stupid-db-mm1.","status":"open","priority":3,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:37Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:37Z","dependencies":[{"issue_id":"stupid-db-pnf","depends_on_id":"stupid-db-1kd","type":"blocks","created_at":"2026-02-17T19:25:57Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-pnf","depends_on_id":"stupid-db-30l","type":"blocks","created_at":"2026-02-17T19:25:57Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-qf0","title":"chore: Batch task execution (22 issues, 5 waves) rules-unification 2026-02-17","description":"Tracking issue for wave-based execution of rules-unification epic (#144).\\n\\nWave 1: #122 (CommonMetadata)\\nWave 2: #123 (RuleEnvelope/RuleDocument)\\nWave 3: #124, #127, #132, #136, #138, #140 (rule kinds + extends)\\nWave 4: #125, #128, #133-#135, #137, #139, #141, #142 (refactoring + integration)\\nWave 5: #126, #129-#131, #143 (reorganize + validation)","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T17:25:20Z","created_by":"FrancisVarga","updated_at":"2026-02-17T17:55:49Z","closed_at":"2026-02-17T17:55:49Z","close_reason":"All 5 waves of rules-unification batch complete. 22 issues implemented across Waves 1-5."}
{"id":"stupid-db-s32","title":"tool-runtime: Build AgenticLoop (core conversation engine)","description":"Core agentic loop: User-\u003eLLM-\u003eToolCalls-\u003eExecute-\u003eResults-\u003eLLM cycle. Multi-turn, parallel tool exec. GH #169. Part of epic stupid-db-mm1.","status":"open","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:23Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:23Z","dependencies":[{"issue_id":"stupid-db-s32","depends_on_id":"stupid-db-5z0","type":"blocks","created_at":"2026-02-17T19:25:49Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-s32","depends_on_id":"stupid-db-8cm","type":"blocks","created_at":"2026-02-17T19:25:49Z","created_by":"FrancisVarga","metadata":"{}"},{"issue_id":"stupid-db-s32","depends_on_id":"stupid-db-ae4","type":"blocks","created_at":"2026-02-17T19:25:50Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-s4o","title":"Implement smart semantic chunking engine","description":"Create crates/ingest/src/document/chunker.rs with smart chunking:\n\nChunkConfig:\n- max_chunk_tokens: usize (default 500)\n- min_chunk_tokens: usize (default 50)\n- overlap_tokens: usize (default 50)\n\nChunking strategies by file type:\n- Markdown: Split at ## headings first, then paragraph boundaries. Preserve heading as section_heading metadata. Recursive split if section \u003e max.\n- Plain text: Split at paragraph boundaries (double newline), then sentence boundaries (period + space). Overlap between adjacent chunks.\n- PDF: Per-page text, split at paragraph boundaries within pages. Store page_number metadata.\n\nAll types:\n- Merge tiny chunks (\u003c min_chunk_tokens) with adjacent chunk\n- Overlapping windows: last overlap_tokens of chunk N prepended to chunk N+1\n- Token counting: use whitespace splitting (simple) or tiktoken if available\n\nOutput: Vec\u003cChunk\u003e where Chunk { index, content, page_number, section_heading, char_offset }","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:34Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:21:04Z","closed_at":"2026-02-17T22:21:04Z","close_reason":"Smart semantic chunker with 3 strategies (MD heading-aware, PDF page-aware, TXT paragraph-aware), overlap, merge logic. 16 new tests, 34/34 pass.","dependencies":[{"issue_id":"stupid-db-s4o","depends_on_id":"stupid-db-709","type":"blocks","created_at":"2026-02-17T22:12:19Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-s6r","title":"Add navigation link to /ai-sdk page in dashboard","description":"Add a navigation link/button to the /ai-sdk page from the main dashboard layout or home page, so users can discover and navigate to the AI SDK chat interface. Match existing navigation patterns (like the Assistant link).","status":"closed","priority":3,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:20:03Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:24:19Z","closed_at":"2026-02-17T22:24:19Z","close_reason":"Added AI SDK navigation link in dashboard home page header, next to Assistant link, with purple accent matching the AI SDK page theme.","dependencies":[{"issue_id":"stupid-db-s6r","depends_on_id":"stupid-db-zxu","type":"blocks","created_at":"2026-02-17T22:20:12Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-sr9","title":"Embedding Search Pipeline: Implementation Epic","description":"Build a complete semantic search pipeline for stupid-db: file upload (PDF/TXT/MD) → smart chunking → embedding (OpenAI/Ollama) → pgvector storage → vector search API → dashboard /embeddings page.\n\n## Architecture\nDashboard /embeddings → Server (Axum upload+search endpoints) → Ingest (text extraction + smart chunking) → Embedder (OpenAI/Ollama) → PostgreSQL + pgvector (PG_URL from .env)\n\n## Key Decisions\n- Vector storage: pgvector (PostgreSQL) — persistence, SQL filtering, proven at scale\n- Postgres client: sqlx with compile-time query checking\n- PDF extraction: pdf-extract crate (pure Rust)\n- Chunking: Smart semantic (heading/paragraph/page-aware)\n- Embedding dims: Configurable (1536 OpenAI, 768 Ollama)\n- Migration framework: sqlx migrate (embedded in binary)\n- Dashboard: Standalone /embeddings page with upload + search panels\n\n## Success Criteria\n- User can upload PDF/TXT/MD files via drag-and-drop\n- Documents are chunked, embedded, and stored in pgvector\n- Natural language search returns ranked chunks with source attribution\n- Results show: relevance score, source filename, page/section, text preview\n- Documents can be listed and deleted\n- Works with both OpenAI and Ollama backends","status":"closed","priority":1,"issue_type":"feature","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:11:06Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:33:58Z","closed_at":"2026-02-17T22:33:58Z","close_reason":"All 12 sub-issues complete: text extraction, smart chunking, pgvector storage, upload/search API, dashboard UI, 73 tests passing"}
{"id":"stupid-db-t7b","title":"Install @ai-sdk/anthropic provider package","description":"Add the @ai-sdk/anthropic package to dashboard dependencies. The dashboard already has ai@6.0.89 and @ai-sdk/react@3.0.88. Need to add @ai-sdk/anthropic and zod (for tool schemas) if not present. Run bun add @ai-sdk/anthropic zod in dashboard/.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:19:51Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:21:11Z","closed_at":"2026-02-17T22:21:11Z","close_reason":"Installed @ai-sdk/anthropic@3.0.45 and zod@4.3.6. Added ANTHROPIC_API_KEY to .env."}
{"id":"stupid-db-ukr","title":"llm: Implement ToolAwareLlmProvider for OpenAI (function calling)","description":"OpenAiToolProvider with function calling + streaming. Lower priority than Claude. GH #180. Part of epic stupid-db-mm1.","status":"open","priority":3,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T19:25:28Z","created_by":"FrancisVarga","updated_at":"2026-02-17T19:25:28Z","dependencies":[{"issue_id":"stupid-db-ukr","depends_on_id":"stupid-db-5z0","type":"blocks","created_at":"2026-02-17T19:25:53Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-whv","title":"/assistant page: Epic for dashboard tool-runtime + AI SDK integration","description":"Parent tracking issue for brainstorm-assistant-page epic. See GitHub #183 for full details. 8 sub-issues covering Rust SSE backend, Next.js AI SDK proxy, terminal-style chat UI.","status":"closed","priority":1,"issue_type":"feature","owner":"francis@phili-tech.org","created_at":"2026-02-17T20:31:11Z","created_by":"FrancisVarga","updated_at":"2026-02-17T21:00:28Z","closed_at":"2026-02-17T21:00:28Z","close_reason":"All 8 sub-issues implemented and pushed"}
{"id":"stupid-db-wrd","title":"Add ANTHROPIC_API_KEY to dashboard .env configuration","description":"Add ANTHROPIC_API_KEY placeholder to dashboard/.env (or .env.local) and document in the .env file. The API route needs this for the @ai-sdk/anthropic provider. Do NOT commit actual keys.","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:20:06Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:21:11Z","closed_at":"2026-02-17T22:21:11Z","close_reason":"Installed @ai-sdk/anthropic@3.0.45 and zod@4.3.6. Added ANTHROPIC_API_KEY to .env."}
{"id":"stupid-db-y92","title":"kg-pg-mcp: Project scaffolding and config (pydantic-settings, .env)","description":"Set up the package structure: kg_pg_mcp/ module with __init__.py, config.py using pydantic-settings. Config fields: DATABASE_URL, OPENAI_API_KEY, EMBEDDING_MODEL (default text-embedding-3-small), EMBEDDING_DIMENSIONS (auto-detect from model), CHUNK_SIZE, CHUNK_OVERLAP, DEFAULT_NAMESPACE. Load from .env with fallback to env vars. Create .env.example. Update pyproject.toml with all dependencies: asyncpg, sqlalchemy[asyncio], alembic, openai, httpx, beautifulsoup4, markdownify, pymupdf, tiktoken, pgvector, pydantic-settings.","status":"in_progress","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-18T01:53:43Z","created_by":"FrancisVarga","updated_at":"2026-02-18T01:56:15Z"}
{"id":"stupid-db-yvk","title":"Add Embedder to server AppState for embedding API","description":"The server needs access to an Embedder instance for the upload and search endpoints. Currently the Embedder is only in crates/ingest/ and not wired into the server.\n\nOptions:\n1. Create an Arc\u003cdyn Embedder\u003e in main.rs from config (model, api_key, ollama_url) and store in AppState\n2. Or create it on-demand in the upload/search handlers from config\n\nPreferred: Add embedder: Option\u003cArc\u003cdyn Embedder\u003e\u003e to AppState. Construct from config.llm/config.ollama settings. If no embedding config is set, log warning and disable /embeddings endpoints (return 503).\n\nAdd stupid-ingest dependency to crates/server/Cargo.toml if not already present.","status":"closed","priority":2,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:12:04Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:19:52Z","closed_at":"2026-02-17T22:19:52Z","close_reason":"Embedder field added to AppState with build_embedder() factory supporting ollama and openai providers. cargo check passes.","dependencies":[{"issue_id":"stupid-db-yvk","depends_on_id":"stupid-db-jop","type":"blocks","created_at":"2026-02-17T22:12:19Z","created_by":"FrancisVarga","metadata":"{}"}]}
{"id":"stupid-db-zxu","title":"Create /ai-sdk page with useChat hook and ai-elements UI","description":"Create dashboard/app/ai-sdk/page.tsx that: (1) uses useChat hook with DefaultChatTransport pointing to /api/ai-sdk/chat, (2) renders messages using ai-elements components (Conversation, Message, PromptInput), (3) supports file attachments via sendMessage({text, files}), (4) shows reasoning parts when present, (5) renders code blocks with syntax highlighting, (6) includes stop/regenerate controls, (7) shows token usage from message metadata, (8) matches existing dark theme (bg-[#06080d], emerald accent #10b981), (9) includes header with back-to-dashboard link. This is the main page component.","status":"closed","priority":1,"issue_type":"task","owner":"francis@phili-tech.org","created_at":"2026-02-17T22:19:58Z","created_by":"FrancisVarga","updated_at":"2026-02-17T22:23:24Z","closed_at":"2026-02-17T22:23:24Z","close_reason":"Created /ai-sdk page with useChat, streaming, file attachments, reasoning display, code blocks, model selector, token usage, stop/regenerate, dark theme.","dependencies":[{"issue_id":"stupid-db-zxu","depends_on_id":"stupid-db-5yd","type":"blocks","created_at":"2026-02-17T22:20:12Z","created_by":"FrancisVarga","metadata":"{}"}]}
