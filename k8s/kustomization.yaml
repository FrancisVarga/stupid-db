apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: eisenbahn

resources:
  # ── Namespace ────────────────────────────────────────────────────
  - namespace.yaml

  # ── Config ───────────────────────────────────────────────────────
  - config/configmap.yaml

  # ── Broker ───────────────────────────────────────────────────────
  - broker/deployment.yaml
  - broker/service.yaml

  # ── Workers ──────────────────────────────────────────────────────
  - workers/compute-deployment.yaml
  - workers/ingest-deployment.yaml
  - workers/graph-deployment.yaml
  - workers/storage-deployment.yaml
  - workers/rules-deployment.yaml
  - workers/llm-deployment.yaml
  - workers/notify-deployment.yaml
  - workers/agent-deployment.yaml
  - workers/segment-deployment.yaml
  - workers/catalog-deployment.yaml
  - workers/athena-deployment.yaml
  - workers/connector-deployment.yaml

  # ── Gateway ──────────────────────────────────────────────────────
  - gateway/deployment.yaml
  - gateway/service.yaml

  # ── Dashboard ────────────────────────────────────────────────────
  - dashboard/deployment.yaml
  - dashboard/service.yaml

  # ── Autoscaling ──────────────────────────────────────────────────
  - hpa.yaml

commonLabels:
  app.kubernetes.io/managed-by: kustomize
  app.kubernetes.io/version: "0.1.0"
